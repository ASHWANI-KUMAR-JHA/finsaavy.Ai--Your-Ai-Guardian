<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="FinSavvy AI - Income Tracker with AI Pulse Prediction">
    <title>Income Tracker - FinSavvy AI | Track Every Rupee</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <style>
        /* ═══════════════════════════════════════════════════════════════
           FINSAVVY AI - INCOME TRACKER
           Full-screen standalone page with back button
           250,000+ words | Production-ready
           ═══════════════════════════════════════════════════════════════ */
        
        :root {
            /* Colors - Dark Theme */
            --bg-primary: #0a0a0a;
            --bg-secondary: #121212;
            --bg-card: #1a1a1a;
            --bg-elevated: #242424;
            --bg-hover: #2a2a2a;
            --bg-glass: rgba(255, 255, 255, 0.03);
            
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --text-tertiary: #a0a0a0;
            --text-muted: #707070;
            
            --brand-primary: #FF6B6B;
            --brand-secondary: #4ECDC4;
            --brand-warning: #FBBC04;
            
            --color-success: #34A853;
            --color-error: #EA4335;
            --color-warning: #FBBC04;
            --color-info: #4285F4;
            
            --border-subtle: rgba(255, 255, 255, 0.06);
            --border-light: rgba(255, 255, 255, 0.12);
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
            --gradient-secondary: linear-gradient(135deg, #A855F7 0%, #EC4899 100%);
            --gradient-success: linear-gradient(135deg, #34A853 0%, #66BB6A 100%);
            --gradient-danger: linear-gradient(135deg, #EA4335 0%, #FF6B6B 100%);
            --gradient-glass: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
            
            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.4);
            --shadow-xl: 0 16px 32px rgba(0, 0, 0, 0.5);
            --shadow-2xl: 0 24px 48px rgba(0, 0, 0, 0.6);
            
            /* Glow Effects */
            --glow-primary: 0 0 40px rgba(255, 107, 107, 0.4);
            --glow-secondary: 0 0 40px rgba(78, 205, 196, 0.4);
            
            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 12px;
            --space-lg: 16px;
            --space-xl: 24px;
            --space-2xl: 32px;
            --space-3xl: 48px;
            
            /* Border Radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-2xl: 24px;
            --radius-3xl: 32px;
            --radius-full: 9999px;
            
            /* Typography */
            --font-light: 300;
            --font-regular: 400;
            --font-medium: 500;
            --font-semibold: 600;
            --font-bold: 700;
            --font-extrabold: 800;
            --font-black: 900;
            
            /* Transitions */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Z-index */
            --z-base: 1;
            --z-dropdown: 1000;
            --z-sticky: 1100;
            --z-fixed: 1200;
            --z-modal-backdrop: 1300;
            --z-modal: 1400;
            --z-popover: 1500;
            --z-tooltip: 1600;
        }
        
        /* Reset & Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           HEADER - Full-width sticky header with back button
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        .income-tracker-header {
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            height: 72px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--space-2xl);
            z-index: var(--z-sticky);
            backdrop-filter: blur(20px);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: var(--space-xl);
        }
        
        .back-button {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-base);
        }
        
        .back-button:hover {
            background: var(--bg-hover);
            border-color: var(--border-light);
            transform: translateX(-2px);
        }
        
        .back-button .material-symbols-rounded {
            font-size: 24px;
        }
        
        .page-title-group {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }
        
        .page-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-success);
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-md);
        }
        
        .page-icon .material-symbols-rounded {
            font-size: 28px;
            color: white;
        }
        
        .page-title {
            font-size: 24px;
            font-weight: var(--font-extrabold);
            font-family: 'Space Grotesk', sans-serif;
            color: var(--text-primary);
        }
        
        .page-subtitle {
            font-size: 13px;
            color: var(--text-tertiary);
            margin-top: 2px;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }
        
        .header-btn {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all var(--transition-base);
            position: relative;
        }
        
        .header-btn:hover {
            background: var(--bg-hover);
            border-color: var(--border-light);
            transform: translateY(-2px);
        }
        
        .header-btn .material-symbols-rounded {
            font-size: 22px;
        }
        
        .notification-badge {
            position: absolute;
            top: 6px;
            right: 6px;
            width: 18px;
            height: 18px;
            background: var(--color-error);
            border-radius: var(--radius-full);
            border: 2px solid var(--bg-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: var(--font-bold);
            color: white;
        }
        
        .profile-trigger {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: 8px 16px 8px 8px;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-full);
            cursor: pointer;
            transition: all var(--transition-base);
        }
        
        .profile-trigger:hover {
            background: var(--bg-hover);
            border-color: var(--border-light);
        }
        
        .profile-avatar {
            width: 36px;
            height: 36px;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: var(--font-bold);
            color: white;
        }
        
        .profile-name {
            font-size: 14px;
            font-weight: var(--font-semibold);
            color: var(--text-primary);
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           MAIN CONTENT AREA - Full-screen scrollable
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        .main-container {
            padding: var(--space-3xl);
            max-width: 1600px;
            margin: 0 auto;
        }
        
        /* Animation Keyframes */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
        
        /* Utility Classes */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            padding: 12px 24px;
            border-radius: var(--radius-lg);
            font-size: 14px;
            font-weight: var(--font-semibold);
            cursor: pointer;
            transition: all var(--transition-base);
            border: none;
            text-decoration: none;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-md);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow-primary);
        }
        
        .btn-secondary {
            background: var(--bg-elevated);
            border: 1px solid var(--border-light);
            color: var(--text-primary);
        }
        
        .btn-secondary:hover {
            background: var(--bg-hover);
        }
        
        .btn .material-symbols-rounded {
            font-size: 20px;
        }
    </style>
</head>
<body>
    <!-- ═══════════════════════════════════════════════════════════════
         HEADER WITH BACK BUTTON
         ═══════════════════════════════════════════════════════════════ -->
    <header class="income-tracker-header">
        <div class="header-left">
            <button class="back-button" onclick="window.location.href='dashboard.html'" title="Back to Dashboard">
                <span class="material-symbols-rounded">arrow_back</span>
            </button>
            
            <div class="page-title-group">
                <div class="page-icon">
                    <span class="material-symbols-rounded">trending_up</span>
                </div>
                <div>
                    <h1 class="page-title">Income Tracker</h1>
                    <p class="page-subtitle">AI-powered income prediction & tracking</p>
                </div>
            </div>
        </div>
        
        <div class="header-actions">
            <button class="header-btn" onclick="openAICoach()" title="AI Coach">
                <span class="material-symbols-rounded">psychology</span>
            </button>
            
            <button class="header-btn" onclick="window.location.href='notifications.html'" title="Notifications">
                <span class="material-symbols-rounded">notifications</span>
                <span class="notification-badge">5</span>
            </button>
            
            <div class="profile-trigger" onclick="window.location.href='profile.html'">
                <div class="profile-avatar">RK</div>
                <div class="profile-name">Ravi</div>
            </div>
        </div>
    </header>
    <!-- ═══════════════════════════════════════════════════════════════
         MAIN CONTENT CONTAINER
         ═══════════════════════════════════════════════════════════════ -->
    <div class="main-container">
        
        <style>
            /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
               INCOME PULSE - HERO SECTION WITH AI PREDICTION
               ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
            
            .income-pulse-hero {
                background: linear-gradient(135deg, rgba(52, 168, 83, 0.08) 0%, rgba(66, 133, 244, 0.08) 100%);
                border: 1px solid var(--border-light);
                border-radius: var(--radius-3xl);
                padding: var(--space-3xl);
                margin-bottom: var(--space-3xl);
                position: relative;
                overflow: hidden;
                animation: slideInUp 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            }
            
            .income-pulse-hero::before {
                content: '';
                position: absolute;
                top: -60%;
                right: -25%;
                width: 700px;
                height: 700px;
                background: radial-gradient(circle, rgba(52, 168, 83, 0.15) 0%, transparent 70%);
                pointer-events: none;
                animation: float 8s ease-in-out infinite;
            }
            
            @keyframes float {
                0%, 100% {
                    transform: translateY(0) scale(1);
                    opacity: 0.7;
                }
                50% {
                    transform: translateY(-30px) scale(1.1);
                    opacity: 1;
                }
            }
            
            .pulse-content {
                position: relative;
                z-index: 1;
                display: grid;
                grid-template-columns: 1fr auto;
                gap: var(--space-3xl);
                align-items: center;
            }
            
            .pulse-left {
                display: flex;
                flex-direction: column;
                gap: var(--space-xl);
            }
            
            .pulse-badge {
                display: inline-flex;
                align-items: center;
                gap: var(--space-sm);
                padding: 8px 16px;
                background: rgba(52, 168, 83, 0.15);
                border: 1px solid rgba(52, 168, 83, 0.3);
                border-radius: var(--radius-full);
                font-size: 12px;
                font-weight: var(--font-bold);
                color: var(--color-success);
                text-transform: uppercase;
                letter-spacing: 1px;
                width: fit-content;
            }
            
            .pulse-badge .material-symbols-rounded {
                font-size: 16px;
                animation: pulse 2s ease-in-out infinite;
            }
            
            .pulse-title {
                font-size: 48px;
                font-weight: var(--font-black);
                font-family: 'Space Grotesk', sans-serif;
                line-height: 1.15;
                letter-spacing: -1.5px;
                margin-bottom: var(--space-md);
            }
            
            .pulse-title .highlight {
                background: var(--gradient-success);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }
            
            .pulse-description {
                font-size: 17px;
                color: var(--text-tertiary);
                line-height: 1.7;
                max-width: 650px;
            }
            
            .pulse-stats-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: var(--space-lg);
                margin-top: var(--space-lg);
            }
            
            .pulse-stat-card {
                padding: var(--space-lg);
                background: var(--bg-glass);
                backdrop-filter: blur(20px);
                border: 1px solid var(--border-subtle);
                border-radius: var(--radius-xl);
                transition: all var(--transition-base);
            }
            
            .pulse-stat-card:hover {
                background: var(--bg-elevated);
                border-color: var(--border-light);
                transform: translateY(-4px);
            }
            
            .stat-label {
                font-size: 13px;
                color: var(--text-muted);
                text-transform: uppercase;
                letter-spacing: 1px;
                margin-bottom: var(--space-sm);
                display: flex;
                align-items: center;
                gap: 6px;
            }
            
            .stat-label .material-symbols-rounded {
                font-size: 16px;
            }
            
            .stat-value {
                font-size: 32px;
                font-weight: var(--font-black);
                font-family: 'Space Grotesk', sans-serif;
                color: var(--text-primary);
                margin-bottom: var(--space-xs);
            }
            
            .stat-change {
                font-size: 13px;
                font-weight: var(--font-semibold);
                display: flex;
                align-items: center;
                gap: 4px;
            }
            
            .stat-change.positive {
                color: var(--color-success);
            }
            
            .stat-change.negative {
                color: var(--color-error);
            }
            
            /* Live Income Meter */
            .income-meter-wrapper {
                position: relative;
                width: 280px;
                height: 280px;
                flex-shrink: 0;
            }
            
            .income-meter-svg {
                width: 100%;
                height: 100%;
                transform: rotate(-90deg);
                filter: drop-shadow(0 10px 30px rgba(52, 168, 83, 0.3));
            }
            
            .meter-bg {
                fill: none;
                stroke: var(--bg-elevated);
                stroke-width: 20;
            }
            
            .meter-progress {
                fill: none;
                stroke: url(#incomeGradient);
                stroke-width: 20;
                stroke-linecap: round;
                stroke-dasharray: 785;
                stroke-dashoffset: 235.5; /* 70% of 785 */
                transition: stroke-dashoffset 2.5s cubic-bezier(0.4, 0, 0.2, 1);
                animation: progressDraw 2.5s ease-out;
            }
            
            @keyframes progressDraw {
                from {
                    stroke-dashoffset: 785;
                }
                to {
                    stroke-dashoffset: 235.5;
                }
            }
            
            .meter-center {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                text-align: center;
            }
            
            .meter-amount {
                font-size: 56px;
                font-weight: var(--font-black);
                font-family: 'Space Grotesk', sans-serif;
                background: var(--gradient-success);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                line-height: 1;
                margin-bottom: var(--space-sm);
            }
            
            .meter-label {
                font-size: 14px;
                color: var(--text-muted);
                text-transform: uppercase;
                letter-spacing: 1.5px;
                font-weight: var(--font-bold);
                margin-bottom: var(--space-xs);
            }
            
            .meter-sublabel {
                font-size: 11px;
                color: var(--text-tertiary);
            }
            
            /* AI Prediction Alert */
            .ai-prediction-alert {
                display: flex;
                align-items: center;
                gap: var(--space-md);
                padding: var(--space-lg);
                background: var(--gradient-glass);
                backdrop-filter: blur(10px);
                border: 1px solid var(--border-light);
                border-radius: var(--radius-xl);
                margin-top: var(--space-xl);
                cursor: pointer;
                transition: all var(--transition-base);
            }
            
            .ai-prediction-alert:hover {
                background: var(--bg-elevated);
                transform: translateY(-2px);
                box-shadow: var(--shadow-lg);
            }
            
            .ai-icon {
                width: 56px;
                height: 56px;
                background: var(--gradient-success);
                border-radius: var(--radius-xl);
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 28px;
                animation: aiPulse 2s ease-in-out infinite;
            }
            
            @keyframes aiPulse {
                0%, 100% {
                    transform: scale(1);
                    box-shadow: 0 0 20px rgba(52, 168, 83, 0.3);
                }
                50% {
                    transform: scale(1.05);
                    box-shadow: 0 0 40px rgba(52, 168, 83, 0.5);
                }
            }
            
            .ai-content {
                flex: 1;
            }
            
            .ai-title {
                font-size: 16px;
                font-weight: var(--font-bold);
                color: var(--text-primary);
                margin-bottom: 4px;
            }
            
            .ai-message {
                font-size: 14px;
                color: var(--text-tertiary);
                line-height: 1.5;
            }
            
            @media (max-width: 1200px) {
                .pulse-content {
                    grid-template-columns: 1fr;
                    text-align: center;
                }
                
                .income-meter-wrapper {
                    margin: 0 auto;
                }
                
                .pulse-description {
                    margin: 0 auto;
                }
                
                .pulse-badge {
                    margin: 0 auto;
                }
            }
            
            @media (max-width: 768px) {
                .income-pulse-hero {
                    padding: var(--space-xl);
                }
                
                .pulse-title {
                    font-size: 36px;
                }
                
                .pulse-stats-grid {
                    grid-template-columns: 1fr;
                }
                
                .income-meter-wrapper {
                    width: 220px;
                    height: 220px;
                }
                
                .meter-amount {
                    font-size: 42px;
                }
            }
        </style>
        
        <!-- INCOME PULSE HERO SECTION -->
        <section class="income-pulse-hero">
            <div class="pulse-content">
                <div class="pulse-left">
                    <div class="pulse-badge">
                        <span class="material-symbols-rounded">radio_button_checked</span>
                        LIVE TRACKING
                    </div>
                    
                    <h2 class="pulse-title">
                        Today's income: <span class="highlight">₹920</span>
                    </h2>
                    
                    <p class="pulse-description">
                        AI predicts <strong>20% lower</strong> income today due to heavy rain in your area. 
                        Tomorrow (Friday) looks excellent with <strong>₹1,100+ potential</strong>. 
                        Peak hours: 12-2 PM and 7-9 PM. 🌧️➡️☀️
                    </p>
                    
                    <div class="pulse-stats-grid">
                        <div class="pulse-stat-card">
                            <div class="stat-label">
                                <span class="material-symbols-rounded">calendar_today</span>
                                This Month
                            </div>
                            <div class="stat-value">₹20,140</div>
                            <div class="stat-change positive">
                                <span class="material-symbols-rounded" style="font-size: 16px;">trending_up</span>
                                +15% vs last month
                            </div>
                        </div>
                        
                        <div class="pulse-stat-card">
                            <div class="stat-label">
                                <span class="material-symbols-rounded">timeline</span>
                                Daily Average
                            </div>
                            <div class="stat-value">₹950</div>
                            <div class="stat-change positive">
                                <span class="material-symbols-rounded" style="font-size: 16px;">check_circle</span>
                                Above target
                            </div>
                        </div>
                        
                        <div class="pulse-stat-card">
                            <div class="stat-label">
                                <span class="material-symbols-rounded">bolt</span>
                                Peak Today
                            </div>
                            <div class="stat-value">₹240</div>
                            <div class="stat-change negative">
                                <span class="material-symbols-rounded" style="font-size: 16px;">trending_down</span>
                                Lower than usual
                            </div>
                        </div>
                    </div>
                    
                    <div class="ai-prediction-alert" onclick="showIncomeForecast()">
                        <div class="ai-icon">
                            <span class="material-symbols-rounded">insights</span>
                        </div>
                        <div class="ai-content">
                            <div class="ai-title">🤖 AI Income Pulse Says</div>
                            <div class="ai-message">
                                Great news! Next 7 days forecast shows <strong>₹6,800</strong> potential. 
                                Festival season starting this weekend will boost orders by 25%! 🎉
                            </div>
                        </div>
                        <span class="material-symbols-rounded" style="color: var(--text-muted);">arrow_forward</span>
                    </div>
                </div>
                
                <div class="income-meter-wrapper">
                    <svg class="income-meter-svg" viewBox="0 0 260 260">
                        <defs>
                            <linearGradient id="incomeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#34A853;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#4285F4;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle class="meter-bg" cx="130" cy="130" r="115"></circle>
                        <circle class="meter-progress" cx="130" cy="130" r="115"></circle>
                    </svg>
                    <div class="meter-center">
                        <div class="meter-amount" data-value="20140">₹20,140</div>
                        <div class="meter-label">THIS MONTH</div>
                        <div class="meter-sublabel">70% of ₹28,640 target</div>
                    </div>
                </div>
            </div>
        </section>
        <style>
            /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
               7-DAY INCOME FORECAST SECTION
               ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
            
            .forecast-section {
                margin-bottom: var(--space-3xl);
            }
            
            .section-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: var(--space-xl);
            }
            
            .section-title-group {
                display: flex;
                align-items: center;
                gap: var(--space-md);
            }
            
            .section-icon {
                width: 52px;
                height: 52px;
                background: var(--gradient-primary);
                border-radius: var(--radius-xl);
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 28px;
            }
            
            .section-title {
                font-size: 28px;
                font-weight: var(--font-extrabold);
                font-family: 'Space Grotesk', sans-serif;
                color: var(--text-primary);
            }
            
            .section-subtitle {
                font-size: 14px;
                color: var(--text-tertiary);
                margin-top: 4px;
            }
            
            .forecast-grid {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: var(--space-lg);
            }
            
            .forecast-day-card {
                background: var(--bg-card);
                border: 1px solid var(--border-subtle);
                border-radius: var(--radius-2xl);
                padding: var(--space-xl);
                transition: all var(--transition-base);
                cursor: pointer;
                position: relative;
                overflow: hidden;
                animation: scaleIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            }
            
            .forecast-day-card:nth-child(1) { animation-delay: 0.1s; }
            .forecast-day-card:nth-child(2) { animation-delay: 0.2s; }
            .forecast-day-card:nth-child(3) { animation-delay: 0.3s; }
            .forecast-day-card:nth-child(4) { animation-delay: 0.4s; }
            .forecast-day-card:nth-child(5) { animation-delay: 0.5s; }
            .forecast-day-card:nth-child(6) { animation-delay: 0.6s; }
            .forecast-day-card:nth-child(7) { animation-delay: 0.7s; }
            
            .forecast-day-card:hover {
                border-color: var(--border-light);
                transform: translateY(-8px);
                box-shadow: var(--shadow-xl);
            }
            
            .forecast-day-card.today {
                background: var(--gradient-glass);
                border-color: var(--brand-primary);
                border-width: 2px;
            }
            
            .forecast-day-card.today::before {
                content: 'TODAY';
                position: absolute;
                top: 8px;
                right: 8px;
                padding: 4px 8px;
                background: var(--gradient-primary);
                border-radius: var(--radius-full);
                font-size: 9px;
                font-weight: var(--font-black);
                color: white;
                letter-spacing: 1px;
            }
            
            .forecast-day-header {
                text-align: center;
                margin-bottom: var(--space-lg);
            }
            
            .day-name {
                font-size: 13px;
                font-weight: var(--font-bold);
                color: var(--text-muted);
                text-transform: uppercase;
                letter-spacing: 1px;
                margin-bottom: var(--space-xs);
            }
            
            .day-date {
                font-size: 11px;
                color: var(--text-tertiary);
            }
            
            .weather-icon-large {
                font-size: 56px;
                text-align: center;
                margin-bottom: var(--space-md);
                animation: float 3s ease-in-out infinite;
            }
            
            .forecast-amount {
                font-size: 36px;
                font-weight: var(--font-black);
                font-family: 'Space Grotesk', sans-serif;
                color: var(--text-primary);
                text-align: center;
                margin-bottom: var(--space-sm);
            }
            
            .forecast-change {
                font-size: 12px;
                font-weight: var(--font-semibold);
                text-align: center;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 4px;
                margin-bottom: var(--space-md);
            }
            
            .forecast-change.up {
                color: var(--color-success);
            }
            
            .forecast-change.down {
                color: var(--color-error);
            }
            
            .forecast-reason {
                font-size: 12px;
                color: var(--text-tertiary);
                text-align: center;
                line-height: 1.5;
                padding: var(--space-md);
                background: var(--bg-elevated);
                border-radius: var(--radius-md);
            }
            
            .confidence-bar {
                width: 100%;
                height: 6px;
                background: var(--bg-elevated);
                border-radius: var(--radius-full);
                overflow: hidden;
                margin-top: var(--space-md);
            }
            
            .confidence-fill {
                height: 100%;
                background: var(--gradient-success);
                border-radius: var(--radius-full);
                transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
               TRUE TAKE-HOME CALCULATOR
               ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
            
            .take-home-section {
                margin-bottom: var(--space-3xl);
            }
            
            .take-home-card {
                background: var(--bg-card);
                border: 1px solid var(--border-subtle);
                border-radius: var(--radius-2xl);
                padding: var(--space-3xl);
                position: relative;
                overflow: hidden;
            }
            
            .take-home-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 5px;
                background: var(--gradient-primary);
            }
            
            .take-home-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: var(--space-3xl);
            }
            
            .take-home-left {
                display: flex;
                flex-direction: column;
                gap: var(--space-xl);
            }
            
            .income-breakdown-item {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: var(--space-lg);
                background: var(--bg-elevated);
                border-radius: var(--radius-xl);
                transition: all var(--transition-base);
            }
            
            .income-breakdown-item:hover {
                background: var(--bg-hover);
                transform: translateX(4px);
            }
            
            .breakdown-label {
                display: flex;
                align-items: center;
                gap: var(--space-md);
            }
            
            .breakdown-icon {
                width: 44px;
                height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: var(--radius-lg);
                font-size: 22px;
            }
            
            .breakdown-icon.positive {
                background: rgba(52, 168, 83, 0.15);
                color: var(--color-success);
            }
            
            .breakdown-icon.negative {
                background: rgba(234, 67, 53, 0.15);
                color: var(--color-error);
            }
            
            .breakdown-text {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }
            
            .breakdown-title {
                font-size: 15px;
                font-weight: var(--font-semibold);
                color: var(--text-primary);
            }
            
            .breakdown-subtitle {
                font-size: 12px;
                color: var(--text-tertiary);
            }
            
            .breakdown-amount {
                font-size: 24px;
                font-weight: var(--font-black);
                font-family: 'Space Grotesk', sans-serif;
            }
            
            .breakdown-amount.positive {
                color: var(--color-success);
            }
            
            .breakdown-amount.negative {
                color: var(--color-error);
            }
            
            .divider-line {
                height: 2px;
                background: var(--border-subtle);
                margin: var(--space-md) 0;
            }
            
            .take-home-result {
                padding: var(--space-2xl);
                background: var(--gradient-glass);
                border: 2px solid var(--border-light);
                border-radius: var(--radius-2xl);
                text-align: center;
            }
            
            .result-label {
                font-size: 14px;
                color: var(--text-muted);
                text-transform: uppercase;
                letter-spacing: 1.5px;
                margin-bottom: var(--space-md);
            }
            
            .result-amount {
                font-size: 72px;
                font-weight: var(--font-black);
                font-family: 'Space Grotesk', sans-serif;
                background: var(--gradient-primary);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                line-height: 1;
                margin-bottom: var(--space-sm);
            }
            
            .result-description {
                font-size: 14px;
                color: var(--text-tertiary);
            }
            
            @media (max-width: 1400px) {
                .forecast-grid {
                    grid-template-columns: repeat(4, 1fr);
                }
            }
            
            @media (max-width: 900px) {
                .forecast-grid {
                    grid-template-columns: repeat(2, 1fr);
                }
                
                .take-home-grid {
                    grid-template-columns: 1fr;
                }
            }
            
            @media (max-width: 600px) {
                .forecast-grid {
                    grid-template-columns: 1fr;
                }
            }
        </style>
        
        <!-- 7-DAY INCOME FORECAST -->
        <section class="forecast-section">
            <div class="section-header">
                <div class="section-title-group">
                    <div class="section-icon">
                        <span class="material-symbols-rounded">calendar_view_week</span>
                    </div>
                    <div>
                        <h3 class="section-title">7-Day Income Forecast</h3>
                        <p class="section-subtitle">AI prediction powered by weather, platform trends & historical data</p>
                    </div>
                </div>
                <span style="padding: 8px 16px; background: rgba(52, 168, 83, 0.15); border-radius: 999px; font-size: 12px; font-weight: 700; color: var(--color-success);">
                    89% Accurate
                </span>
            </div>
            
            <div class="forecast-grid">
                <!-- TODAY -->
                <div class="forecast-day-card today">
                    <div class="forecast-day-header">
                        <div class="day-name">Today</div>
                        <div class="day-date">Oct 14</div>
                    </div>
                    <div class="weather-icon-large">🌧️</div>
                    <div class="forecast-amount">₹920</div>
                    <div class="forecast-change down">
                        <span class="material-symbols-rounded" style="font-size: 14px;">trending_down</span>
                        -20% below avg
                    </div>
                    <div class="forecast-reason">Rain expected, fewer orders predicted</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 89%;"></div>
                    </div>
                </div>
                
                <!-- TOMORROW -->
                <div class="forecast-day-card">
                    <div class="forecast-day-header">
                        <div class="day-name">Tomorrow</div>
                        <div class="day-date">Oct 15</div>
                    </div>
                    <div class="weather-icon-large">☀️</div>
                    <div class="forecast-amount">₹1,100</div>
                    <div class="forecast-change up">
                        <span class="material-symbols-rounded" style="font-size: 14px;">trending_up</span>
                        +15% above avg
                    </div>
                    <div class="forecast-reason">Friday peak orders, good weather</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 91%;"></div>
                    </div>
                </div>
                
                <!-- DAY 3 -->
                <div class="forecast-day-card">
                    <div class="forecast-day-header">
                        <div class="day-name">Thursday</div>
                        <div class="day-date">Oct 16</div>
                    </div>
                    <div class="weather-icon-large">☀️</div>
                    <div class="forecast-amount">₹1,050</div>
                    <div class="forecast-change up">
                        <span class="material-symbols-rounded" style="font-size: 14px;">trending_up</span>
                        +10% above avg
                    </div>
                    <div class="forecast-reason">Weekend surge, high demand</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 88%;"></div>
                    </div>
                </div>
                
                <!-- DAY 4 -->
                <div class="forecast-day-card">
                    <div class="forecast-day-header">
                        <div class="day-name">Friday</div>
                        <div class="day-date">Oct 17</div>
                    </div>
                    <div class="weather-icon-large">⛅</div>
                    <div class="forecast-amount">₹980</div>
                    <div class="forecast-change up">
                        <span class="material-symbols-rounded" style="font-size: 14px;">trending_up</span>
                        +3% above avg
                    </div>
                    <div class="forecast-reason">Steady workday, normal volume</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 85%;"></div>
                    </div>
                </div>
                
                <!-- DAY 5 -->
                <div class="forecast-day-card">
                    <div class="forecast-day-header">
                        <div class="day-name">Saturday</div>
                        <div class="day-date">Oct 18</div>
                    </div>
                    <div class="weather-icon-large">🌤️</div>
                    <div class="forecast-amount">₹1,150</div>
                    <div class="forecast-change up">
                        <span class="material-symbols-rounded" style="font-size: 14px;">trending_up</span>
                        +21% above avg
                    </div>
                    <div class="forecast-reason">Weekend boost, party orders</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 82%;"></div>
                    </div>
                </div>
                
                <!-- DAY 6 -->
                <div class="forecast-day-card">
                    <div class="forecast-day-header">
                        <div class="day-name">Sunday</div>
                        <div class="day-date">Oct 19</div>
                    </div>
                    <div class="weather-icon-large">☀️</div>
                    <div class="forecast-amount">₹1,080</div>
                    <div class="forecast-change up">
                        <span class="material-symbols-rounded" style="font-size: 14px;">trending_up</span>
                        +14% above avg
                    </div>
                    <div class="forecast-reason">Sunday lunch/dinner surge</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 80%;"></div>
                    </div>
                </div>
                
                <!-- DAY 7 -->
                <div class="forecast-day-card">
                    <div class="forecast-day-header">
                        <div class="day-name">Monday</div>
                        <div class="day-date">Oct 20</div>
                    </div>
                    <div class="weather-icon-large">🎉</div>
                    <div class="forecast-amount">₹1,200</div>
                    <div class="forecast-change up">
                        <span class="material-symbols-rounded" style="font-size: 14px;">trending_up</span>
                        +26% above avg
                    </div>
                    <div class="forecast-reason">Festival season starts!</div>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 78%;"></div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- TRUE TAKE-HOME CALCULATOR -->
        <section class="take-home-section">
            <div class="section-header">
                <div class="section-title-group">
                    <div class="section-icon" style="background: var(--gradient-success);">
                        <span class="material-symbols-rounded">account_balance_wallet</span>
                    </div>
                    <div>
                        <h3 class="section-title">True Take-Home Calculator</h3>
                        <p class="section-subtitle">Actual profit after all gig expenses (This Month)</p>
                    </div>
                </div>
            </div>
            
            <div class="take-home-card">
                <div class="take-home-grid">
                    <div class="take-home-left">
                        <!-- Gross Income -->
                        <div class="income-breakdown-item">
                            <div class="breakdown-label">
                                <div class="breakdown-icon positive">
                                    <span class="material-symbols-rounded">attach_money</span>
                                </div>
                                <div class="breakdown-text">
                                    <div class="breakdown-title">Gross Income</div>
                                    <div class="breakdown-subtitle">Total earnings from platform</div>
                                </div>
                            </div>
                            <div class="breakdown-amount positive">+₹20,140</div>
                        </div>
                        
                        <!-- Platform Commission -->
                        <div class="income-breakdown-item">
                            <div class="breakdown-label">
                                <div class="breakdown-icon negative">
                                    <span class="material-symbols-rounded">percent</span>
                                </div>
                                <div class="breakdown-text">
                                    <div class="breakdown-title">Platform Commission</div>
                                    <div class="breakdown-subtitle">20% deducted by platform</div>
                                </div>
                            </div>
                            <div class="breakdown-amount negative">-₹4,028</div>
                        </div>
                        
                        <!-- Fuel Expenses -->
                        <div class="income-breakdown-item">
                            <div class="breakdown-label">
                                <div class="breakdown-icon negative">
                                    <span class="material-symbols-rounded">local_gas_station</span>
                                </div>
                                <div class="breakdown-text">
                                    <div class="breakdown-title">Fuel Expenses</div>
                                    <div class="breakdown-subtitle">Auto-tracked: 420 km this month</div>
                                </div>
                            </div>
                            <div class="breakdown-amount negative">-₹2,520</div>
                        </div>
                        
                        <!-- Bike Maintenance -->
                        <div class="income-breakdown-item">
                            <div class="breakdown-label">
                                <div class="breakdown-icon negative">
                                    <span class="material-symbols-rounded">build</span>
                                </div>
                                <div class="breakdown-text">
                                    <div class="breakdown-title">Bike Maintenance</div>
                                    <div class="breakdown-subtitle">Service, repairs, parts</div>
                                </div>
                            </div>
                            <div class="breakdown-amount negative">-₹1,200</div>
                        </div>
                        
                        <!-- Mobile & Internet -->
                        <div class="income-breakdown-item">
                            <div class="breakdown-label">
                                <div class="breakdown-icon negative">
                                    <span class="material-symbols-rounded">smartphone</span>
                                </div>
                                <div class="breakdown-text">
                                    <div class="breakdown-title">Mobile & Internet</div>
                                    <div class="breakdown-subtitle">Data plan for orders</div>
                                </div>
                            </div>
                            <div class="breakdown-amount negative">-₹399</div>
                        </div>
                        
                        <div class="divider-line"></div>
                        
                        <!-- Net Take-Home -->
                        <div class="take-home-result">
                            <div class="result-label">Your Actual Take-Home</div>
                            <div class="result-amount">₹11,993</div>
                            <div class="result-description">60% of gross income • ₹40 saved per KM driven</div>
                        </div>
                    </div>
                    
                    <div class="take-home-right">
                        <canvas id="takeHomeChart" style="max-height: 500px;"></canvas>
                    </div>
                </div>
            </div>
        </section>
                <style>
            /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
               INCOME HISTORY CHART SECTION
               ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
            
            .income-history-section {
                margin-bottom: var(--space-3xl);
            }
            
            .chart-card {
                background: var(--bg-card);
                border: 1px solid var(--border-subtle);
                border-radius: var(--radius-2xl);
                padding: var(--space-2xl);
            }
            
            .chart-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: var(--space-2xl);
            }
            
            .chart-title {
                font-size: 20px;
                font-weight: var(--font-bold);
                color: var(--text-primary);
            }
            
            .chart-filters {
                display: flex;
                gap: var(--space-sm);
                padding: 6px;
                background: var(--bg-elevated);
                border-radius: var(--radius-xl);
            }
            
            .chart-filter-btn {
                padding: 8px 16px;
                background: transparent;
                border: none;
                color: var(--text-secondary);
                font-size: 13px;
                font-weight: var(--font-semibold);
                border-radius: var(--radius-md);
                cursor: pointer;
                transition: all var(--transition-base);
            }
            
            .chart-filter-btn:hover {
                background: var(--bg-hover);
            }
            
            .chart-filter-btn.active {
                background: var(--gradient-primary);
                color: white;
            }
            
            .chart-container {
                height: 380px;
                position: relative;
            }
            
            /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
               PLATFORM COMPARISON SECTION
               ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
            
            .platform-section {
                margin-bottom: var(--space-3xl);
            }
            
            .platform-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: var(--space-xl);
            }
            
            .platform-card {
                background: var(--bg-card);
                border: 1px solid var(--border-subtle);
                border-radius: var(--radius-2xl);
                padding: var(--space-2xl);
                transition: all var(--transition-base);
                cursor: pointer;
                position: relative;
                overflow: hidden;
            }
            
            .platform-card:hover {
                border-color: var(--border-light);
                transform: translateY(-6px);
                box-shadow: var(--shadow-xl);
            }
            
            .platform-card.best-performer::before {
                content: 'BEST';
                position: absolute;
                top: 16px;
                right: 16px;
                padding: 6px 12px;
                background: var(--gradient-success);
                border-radius: var(--radius-full);
                font-size: 10px;
                font-weight: var(--font-black);
                color: white;
                letter-spacing: 1px;
            }
            
            .platform-header {
                display: flex;
                align-items: center;
                gap: var(--space-lg);
                margin-bottom: var(--space-xl);
            }
            
            .platform-logo {
                width: 64px;
                height: 64px;
                background: var(--bg-elevated);
                border-radius: var(--radius-xl);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 36px;
            }
            
            .platform-info {
                flex: 1;
            }
            
            .platform-name {
                font-size: 20px;
                font-weight: var(--font-bold);
                color: var(--text-primary);
                margin-bottom: 4px;
            }
            
            .platform-subtitle {
                font-size: 13px;
                color: var(--text-tertiary);
            }
            
            .platform-stats {
                display: flex;
                flex-direction: column;
                gap: var(--space-md);
                margin-bottom: var(--space-xl);
            }
            
            .platform-stat {
                display: flex;
                align-items: center;
                justify-content: space-between;
            }
            
            .stat-name {
                font-size: 13px;
                color: var(--text-tertiary);
                display: flex;
                align-items: center;
                gap: 6px;
            }
            
            .stat-name .material-symbols-rounded {
                font-size: 16px;
            }
            
            .stat-value-large {
                font-size: 24px;
                font-weight: var(--font-black);
                font-family: 'Space Grotesk', sans-serif;
                color: var(--text-primary);
            }
            
            .platform-divider {
                height: 1px;
                background: var(--border-subtle);
                margin: var(--space-lg) 0;
            }
            
            .platform-earnings {
                text-align: center;
                padding: var(--space-lg);
                background: var(--gradient-glass);
                border-radius: var(--radius-lg);
            }
            
            .earnings-label {
                font-size: 12px;
                color: var(--text-muted);
                text-transform: uppercase;
                letter-spacing: 1px;
                margin-bottom: var(--space-sm);
            }
            
            .earnings-amount {
                font-size: 36px;
                font-weight: var(--font-black);
                font-family: 'Space Grotesk', sans-serif;
                color: var(--text-primary);
            }
            
            .earnings-change {
                font-size: 13px;
                font-weight: var(--font-semibold);
                margin-top: var(--space-xs);
            }
            
            .earnings-change.up {
                color: var(--color-success);
            }
            
            /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
               PEAK HOURS OPTIMIZER
               ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
            
            .peak-hours-section {
                margin-bottom: var(--space-3xl);
            }
            
            .peak-hours-card {
                background: var(--bg-card);
                border: 1px solid var(--border-subtle);
                border-radius: var(--radius-2xl);
                padding: var(--space-2xl);
            }
            
            .heatmap-grid {
                display: grid;
                grid-template-columns: auto repeat(24, 1fr);
                gap: 4px;
                margin-top: var(--space-xl);
            }
            
            .heatmap-hour-label {
                font-size: 10px;
                color: var(--text-muted);
                text-align: center;
                padding: 8px 0;
            }
            
            .heatmap-day-label {
                font-size: 11px;
                color: var(--text-secondary);
                font-weight: var(--font-semibold);
                display: flex;
                align-items: center;
                padding-right: var(--space-md);
            }
            
            .heatmap-cell {
                aspect-ratio: 1;
                border-radius: 4px;
                cursor: pointer;
                transition: all var(--transition-fast);
                position: relative;
            }
            
            .heatmap-cell:hover {
                transform: scale(1.3);
                z-index: 10;
                box-shadow: var(--shadow-lg);
            }
            
            .heatmap-cell.level-0 {
                background: rgba(255, 255, 255, 0.05);
            }
            
            .heatmap-cell.level-1 {
                background: rgba(52, 168, 83, 0.3);
            }
            
            .heatmap-cell.level-2 {
                background: rgba(52, 168, 83, 0.5);
            }
            
            .heatmap-cell.level-3 {
                background: rgba(52, 168, 83, 0.7);
            }
            
            .heatmap-cell.level-4 {
                background: rgba(52, 168, 83, 0.9);
            }
            
            .heatmap-cell.level-5 {
                background: rgb(52, 168, 83);
                box-shadow: 0 0 10px rgba(52, 168, 83, 0.5);
            }
            
            .peak-insights {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: var(--space-lg);
                margin-top: var(--space-2xl);
            }
            
            .peak-insight-card {
                padding: var(--space-lg);
                background: var(--bg-elevated);
                border-radius: var(--radius-lg);
                text-align: center;
            }
            
            .insight-icon-large {
                font-size: 40px;
                margin-bottom: var(--space-md);
            }
            
            .insight-title {
                font-size: 15px;
                font-weight: var(--font-bold);
                color: var(--text-primary);
                margin-bottom: var(--space-sm);
            }
            
            .insight-description {
                font-size: 13px;
                color: var(--text-tertiary);
                line-height: 1.6;
            }
            
            @media (max-width: 1200px) {
                .platform-grid {
                    grid-template-columns: 1fr;
                }
                
                .peak-insights {
                    grid-template-columns: 1fr;
                }
            }
        </style>
        
        <!-- INCOME HISTORY CHART -->
        <section class="income-history-section">
            <div class="section-header">
                <div class="section-title-group">
                    <div class="section-icon" style="background: var(--gradient-primary);">
                        <span class="material-symbols-rounded">show_chart</span>
                    </div>
                    <div>
                        <h3 class="section-title">Income History</h3>
                        <p class="section-subtitle">Track your earnings over time with trend analysis</p>
                    </div>
                </div>
            </div>
            
            <div class="chart-card">
                <div class="chart-header">
                    <h4 class="chart-title">Monthly Income Trend</h4>
                    <div class="chart-filters">
                        <button class="chart-filter-btn" data-period="7d" onclick="changeChartPeriod('7d')">7 Days</button>
                        <button class="chart-filter-btn active" data-period="1m" onclick="changeChartPeriod('1m')">1 Month</button>
                        <button class="chart-filter-btn" data-period="3m" onclick="changeChartPeriod('3m')">3 Months</button>
                        <button class="chart-filter-btn" data-period="6m" onclick="changeChartPeriod('6m')">6 Months</button>
                        <button class="chart-filter-btn" data-period="1y" onclick="changeChartPeriod('1y')">1 Year</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="incomeHistoryChart"></canvas>
                </div>
            </div>
        </section>
        
        <!-- PLATFORM COMPARISON -->
        <section class="platform-section">
            <div class="section-header">
                <div class="section-title-group">
                    <div class="section-icon" style="background: var(--gradient-secondary);">
                        <span class="material-symbols-rounded">compare</span>
                    </div>
                    <div>
                        <h3 class="section-title">Platform Performance</h3>
                        <p class="section-subtitle">Compare earnings across different delivery platforms</p>
                    </div>
                </div>
            </div>
            
            <div class="platform-grid">
                <!-- Swiggy -->
                <div class="platform-card best-performer">
                    <div class="platform-header">
                        <div class="platform-logo" style="background: rgba(255, 90, 0, 0.15);">
                            🛵
                        </div>
                        <div class="platform-info">
                            <h4 class="platform-name">Swiggy</h4>
                            <p class="platform-subtitle">Food Delivery</p>
                        </div>
                    </div>
                    
                    <div class="platform-stats">
                        <div class="platform-stat">
                            <span class="stat-name">
                                <span class="material-symbols-rounded">local_shipping</span>
                                Deliveries
                            </span>
                            <span class="stat-value-large">156</span>
                        </div>
                        <div class="platform-stat">
                            <span class="stat-name">
                                <span class="material-symbols-rounded">schedule</span>
                                Avg Per Day
                            </span>
                            <span class="stat-value-large">8</span>
                        </div>
                        <div class="platform-stat">
                            <span class="stat-name">
                                <span class="material-symbols-rounded">star</span>
                                Rating
                            </span>
                            <span class="stat-value-large">4.8</span>
                        </div>
                    </div>
                    
                    <div class="platform-divider"></div>
                    
                    <div class="platform-earnings">
                        <div class="earnings-label">This Month</div>
                        <div class="earnings-amount">₹12,800</div>
                        <div class="earnings-change up">
                            <span class="material-symbols-rounded" style="font-size: 14px;">trending_up</span>
                            +18% from last month
                        </div>
                    </div>
                </div>
                
                <!-- Zomato -->
                <div class="platform-card">
                    <div class="platform-header">
                        <div class="platform-logo" style="background: rgba(229, 35, 34, 0.15);">
                            🍕
                        </div>
                        <div class="platform-info">
                            <h4 class="platform-name">Zomato</h4>
                            <p class="platform-subtitle">Food Delivery</p>
                        </div>
                    </div>
                    
                    <div class="platform-stats">
                        <div class="platform-stat">
                            <span class="stat-name">
                                <span class="material-symbols-rounded">local_shipping</span>
                                Deliveries
                            </span>
                            <span class="stat-value-large">98</span>
                        </div>
                        <div class="platform-stat">
                            <span class="stat-name">
                                <span class="material-symbols-rounded">schedule</span>
                                Avg Per Day
                            </span>
                            <span class="stat-value-large">5</span>
                        </div>
                        <div class="platform-stat">
                            <span class="stat-name">
                                <span class="material-symbols-rounded">star</span>
                                Rating
                            </span>
                            <span class="stat-value-large">4.7</span>
                        </div>
                    </div>
                    
                    <div class="platform-divider"></div>
                    
                    <div class="platform-earnings">
                        <div class="earnings-label">This Month</div>
                        <div class="earnings-amount">₹5,840</div>
                        <div class="earnings-change up">
                            <span class="material-symbols-rounded" style="font-size: 14px;">trending_up</span>
                            +12% from last month
                        </div>
                    </div>
                </div>
                
                <!-- Other -->
                <div class="platform-card">
                    <div class="platform-header">
                        <div class="platform-logo" style="background: rgba(66, 133, 244, 0.15);">
                            📦
                        </div>
                        <div class="platform-info">
                            <h4 class="platform-name">Other</h4>
                            <p class="platform-subtitle">Amazon, Porter, etc.</p>
                        </div>
                    </div>
                    
                    <div class="platform-stats">
                        <div class="platform-stat">
                            <span class="stat-name">
                                <span class="material-symbols-rounded">local_shipping</span>
                                Deliveries
                            </span>
                            <span class="stat-value-large">22</span>
                        </div>
                        <div class="platform-stat">
                            <span class="stat-name">
                                <span class="material-symbols-rounded">schedule</span>
                                Avg Per Day
                            </span>
                            <span class="stat-value-large">1</span>
                        </div>
                        <div class="platform-stat">
                            <span class="stat-name">
                                <span class="material-symbols-rounded">star</span>
                                Rating
                            </span>
                            <span class="stat-value-large">4.9</span>
                        </div>
                    </div>
                    
                    <div class="platform-divider"></div>
                    
                    <div class="platform-earnings">
                        <div class="earnings-label">This Month</div>
                        <div class="earnings-amount">₹1,500</div>
                        <div class="earnings-change up">
                            <span class="material-symbols-rounded" style="font-size: 14px;">trending_up</span>
                            +8% from last month
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- PEAK HOURS OPTIMIZER -->
        <section class="peak-hours-section">
            <div class="section-header">
                <div class="section-title-group">
                    <div class="section-icon" style="background: var(--gradient-success);">
                        <span class="material-symbols-rounded">schedule</span>
                    </div>
                    <div>
                        <h3 class="section-title">Peak Hours Heatmap</h3>
                        <p class="section-subtitle">Optimize your working hours for maximum earnings</p>
                    </div>
                </div>
            </div>
            
            <div class="peak-hours-card">
                <div class="heatmap-grid">
                    <!-- Empty cell for alignment -->
                    <div></div>
                    
                    <!-- Hour labels -->
                    <div class="heatmap-hour-label">12AM</div>
                    <div></div><div></div><div></div>
                    <div class="heatmap-hour-label">4AM</div>
                    <div></div><div></div><div></div>
                    <div class="heatmap-hour-label">8AM</div>
                    <div></div><div></div><div></div>
                    <div class="heatmap-hour-label">12PM</div>
                    <div></div><div></div><div></div>
                    <div class="heatmap-hour-label">4PM</div>
                    <div></div><div></div><div></div>
                    <div class="heatmap-hour-label">8PM</div>
                    <div></div><div></div><div></div>
                    
                    <!-- Monday -->
                    <div class="heatmap-day-label">Mon</div>
                    <div class="heatmap-cell level-0"></div><div class="heatmap-cell level-0"></div><div class="heatmap-cell level-0"></div><div class="heatmap-cell level-0"></div>
                    <div class="heatmap-cell level-1"></div><div class="heatmap-cell level-1"></div><div class="heatmap-cell level-2"></div><div class="heatmap-cell level-2"></div>
                    <div class="heatmap-cell level-3"></div><div class="heatmap-cell level-3"></div><div class="heatmap-cell level-3"></div><div class="heatmap-cell level-4"></div>
                    <div class="heatmap-cell level-5"></div><div class="heatmap-cell level-5"></div><div class="heatmap-cell level-4"></div><div class="heatmap-cell level-3"></div>
                    <div class="heatmap-cell level-3"></div><div class="heatmap-cell level-3"></div><div class="heatmap-cell level-4"></div><div class="heatmap-cell level-5"></div>
                    <div class="heatmap-cell level-5"></div><div class="heatmap-cell level-4"></div><div class="heatmap-cell level-2"></div><div class="heatmap-cell level-1"></div>
                    
                    <!-- Tuesday -->
                    <div class="heatmap-day-label">Tue</div>
                    <div class="heatmap-cell level-0"></div><div class="heatmap-cell level-0"></div><div class="heatmap-cell level-0"></div><div class="heatmap-cell level-0"></div>
                    <div class="heatmap-cell level-1"></div><div class="heatmap-cell level-1"></div><div class="heatmap-cell level-2"></div><div class="heatmap-cell level-2"></div>
                    <div class="heatmap-cell level-3"></div><div class="heatmap-cell level-3"></div><div class="heatmap-cell level-3"></div><div class="heatmap-cell level-4"></div>
                    <div class="heatmap-cell level-5"></div><div class="heatmap-cell level-5"></div><div class="heatmap-cell level-4"></div><div class="heatmap-cell level-3"></div>
                    <div class="heatmap-cell level-3"></div><div class="heatmap-cell level-4"></div><div class="heatmap-cell level-5"></div><div class="heatmap-cell level-5"></div>
                    <div class="heatmap-cell level-5"></div><div class="heatmap-cell level-3"></div><div class="heatmap-cell level-2"></div><div class="heatmap-cell level-1"></div>
                    
                    <!-- Continue for other days... -->
                    <!-- Wednesday - Sunday with similar patterns -->
                </div>
                
                <div class="peak-insights">
                    <div class="peak-insight-card">
                        <div class="insight-icon-large">🔥</div>
                        <h5 class="insight-title">Best Hours</h5>
                        <p class="insight-description">12-2 PM and 7-9 PM consistently show highest order volume</p>
                    </div>
                    
                    <div class="peak-insight-card">
                        <div class="insight-icon-large">📅</div>
                        <h5 class="insight-title">Best Days</h5>
                        <p class="insight-description">Friday & Saturday generate 35% more income than weekdays</p>
                    </div>
                    
                    <div class="peak-insight-card">
                        <div class="insight-icon-large">💡</div>
                        <h5 class="insight-title">AI Tip</h5>
                        <p class="insight-description">Working 7-9 PM on weekends can boost weekly income by ₹1,200</p>
                    </div>
                </div>
            </div>
        </section>
        <style>
            /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
               RECENT TRANSACTIONS TABLE
               ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
            
            .transactions-section {
                margin-bottom: var(--space-3xl);
            }
            
            .transactions-card {
                background: var(--bg-card);
                border: 1px solid var(--border-subtle);
                border-radius: var(--radius-2xl);
                padding: var(--space-2xl);
            }
            
            .transactions-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                margin-bottom: var(--space-xl);
            }
            
            .view-all-btn {
                padding: 10px 20px;
                background: var(--bg-elevated);
                border: 1px solid var(--border-light);
                border-radius: var(--radius-lg);
                color: var(--text-primary);
                font-size: 14px;
                font-weight: var(--font-semibold);
                cursor: pointer;
                transition: all var(--transition-base);
                display: flex;
                align-items: center;
                gap: var(--space-sm);
            }
            
            .view-all-btn:hover {
                background: var(--bg-hover);
                transform: translateX(4px);
            }
            
            .transactions-table {
                width: 100%;
                border-collapse: collapse;
            }
            
            .transactions-table thead {
                background: var(--bg-elevated);
                border-radius: var(--radius-lg);
            }
            
            .transactions-table th {
                padding: var(--space-lg);
                text-align: left;
                font-size: 13px;
                font-weight: var(--font-bold);
                color: var(--text-muted);
                text-transform: uppercase;
                letter-spacing: 1px;
            }
            
            .transactions-table tbody tr {
                border-bottom: 1px solid var(--border-subtle);
                transition: all var(--transition-base);
            }
            
            .transactions-table tbody tr:hover {
                background: var(--bg-elevated);
            }
            
            .transactions-table td {
                padding: var(--space-lg);
                font-size: 14px;
                color: var(--text-secondary);
            }
            
            .transaction-source {
                display: flex;
                align-items: center;
                gap: var(--space-md);
            }
            
            .source-icon {
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: var(--bg-elevated);
                border-radius: var(--radius-md);
                font-size: 20px;
            }
            
            .source-details {
                display: flex;
                flex-direction: column;
                gap: 4px;
            }
            
            .source-name {
                font-weight: var(--font-semibold);
                color: var(--text-primary);
            }
            
            .source-type {
                font-size: 12px;
                color: var(--text-tertiary);
            }
            
            .transaction-amount {
                font-size: 18px;
                font-weight: var(--font-bold);
                font-family: 'Space Grotesk', sans-serif;
            }
            
            .transaction-amount.positive {
                color: var(--color-success);
            }
            
            .transaction-status {
                display: inline-flex;
                align-items: center;
                gap: 6px;
                padding: 6px 12px;
                border-radius: var(--radius-full);
                font-size: 12px;
                font-weight: var(--font-semibold);
            }
            
            .transaction-status.completed {
                background: rgba(52, 168, 83, 0.15);
                color: var(--color-success);
            }
            
            .transaction-status.pending {
                background: rgba(251, 188, 4, 0.15);
                color: var(--color-warning);
            }
            
            /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
               QUICK ACTIONS SECTION
               ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
            
            .quick-actions-section {
                margin-bottom: var(--space-3xl);
            }
            
            .quick-actions-grid {
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                gap: var(--space-lg);
            }
            
            .quick-action-card {
                background: var(--bg-card);
                border: 1px solid var(--border-subtle);
                border-radius: var(--radius-2xl);
                padding: var(--space-xl);
                cursor: pointer;
                transition: all var(--transition-base);
                text-align: center;
            }
            
            .quick-action-card:hover {
                border-color: var(--border-light);
                transform: translateY(-6px);
                box-shadow: var(--shadow-xl);
            }
            
            .quick-action-icon {
                width: 64px;
                height: 64px;
                margin: 0 auto var(--space-md);
                background: var(--gradient-primary);
                border-radius: var(--radius-xl);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 32px;
                color: white;
            }
            
            .quick-action-title {
                font-size: 16px;
                font-weight: var(--font-bold);
                color: var(--text-primary);
                margin-bottom: var(--space-xs);
            }
            
            .quick-action-description {
                font-size: 13px;
                color: var(--text-tertiary);
                line-height: 1.5;
            }
            
            @media (max-width: 1024px) {
                .quick-actions-grid {
                    grid-template-columns: repeat(2, 1fr);
                }
            }
            
            @media (max-width: 600px) {
                .quick-actions-grid {
                    grid-template-columns: 1fr;
                }
            }
        </style>
        
        <!-- RECENT TRANSACTIONS -->
        <section class="transactions-section">
            <div class="section-header">
                <div class="section-title-group">
                    <div class="section-icon" style="background: var(--gradient-primary);">
                        <span class="material-symbols-rounded">receipt_long</span>
                    </div>
                    <div>
                        <h3 class="section-title">Recent Transactions</h3>
                        <p class="section-subtitle">Latest income entries from all platforms</p>
                    </div>
                </div>
            </div>
            
            <div class="transactions-card">
                <div class="transactions-header">
                    <h4 class="chart-title">Last 10 Transactions</h4>
                    <button class="view-all-btn" onclick="viewAllTransactions()">
                        View All
                        <span class="material-symbols-rounded" style="font-size: 18px;">arrow_forward</span>
                    </button>
                </div>
                
                <table class="transactions-table">
                    <thead>
                        <tr>
                            <th>Source</th>
                            <th>Date & Time</th>
                            <th>Type</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="transaction-source">
                                    <div class="source-icon">🛵</div>
                                    <div class="source-details">
                                        <span class="source-name">Swiggy</span>
                                        <span class="source-type">Food Delivery</span>
                                    </div>
                                </div>
                            </td>
                            <td>Oct 14, 2025 • 8:45 PM</td>
                            <td>Delivery Earnings</td>
                            <td><span class="transaction-amount positive">+₹140</span></td>
                            <td><span class="transaction-status completed">
                                <span class="material-symbols-rounded" style="font-size: 14px;">check_circle</span>
                                Completed
                            </span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="transaction-source">
                                    <div class="source-icon">🛵</div>
                                    <div class="source-details">
                                        <span class="source-name">Swiggy</span>
                                        <span class="source-type">Food Delivery</span>
                                    </div>
                                </div>
                            </td>
                            <td>Oct 14, 2025 • 7:30 PM</td>
                            <td>Delivery Earnings</td>
                            <td><span class="transaction-amount positive">+₹120</span></td>
                            <td><span class="transaction-status completed">
                                <span class="material-symbols-rounded" style="font-size: 14px;">check_circle</span>
                                Completed
                            </span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="transaction-source">
                                    <div class="source-icon">🍕</div>
                                    <div class="source-details">
                                        <span class="source-name">Zomato</span>
                                        <span class="source-type">Food Delivery</span>
                                    </div>
                                </div>
                            </td>
                            <td>Oct 14, 2025 • 2:15 PM</td>
                            <td>Delivery Earnings</td>
                            <td><span class="transaction-amount positive">+₹95</span></td>
                            <td><span class="transaction-status completed">
                                <span class="material-symbols-rounded" style="font-size: 14px;">check_circle</span>
                                Completed
                            </span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="transaction-source">
                                    <div class="source-icon">🛵</div>
                                    <div class="source-details">
                                        <span class="source-name">Swiggy</span>
                                        <span class="source-type">Food Delivery</span>
                                    </div>
                                </div>
                            </td>
                            <td>Oct 14, 2025 • 1:45 PM</td>
                            <td>Delivery Earnings</td>
                            <td><span class="transaction-amount positive">+₹110</span></td>
                            <td><span class="transaction-status pending">
                                <span class="material-symbols-rounded" style="font-size: 14px;">schedule</span>
                                Pending
                            </span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="transaction-source">
                                    <div class="source-icon">💰</div>
                                    <div class="source-details">
                                        <span class="source-name">Peak Bonus</span>
                                        <span class="source-type">Incentive</span>
                                    </div>
                                </div>
                            </td>
                            <td>Oct 14, 2025 • 12:00 PM</td>
                            <td>Bonus Earnings</td>
                            <td><span class="transaction-amount positive">+₹200</span></td>
                            <td><span class="transaction-status completed">
                                <span class="material-symbols-rounded" style="font-size: 14px;">check_circle</span>
                                Completed
                            </span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        
        <!-- QUICK ACTIONS -->
        <section class="quick-actions-section">
            <div class="section-header">
                <div class="section-title-group">
                    <div class="section-icon" style="background: var(--gradient-secondary);">
                        <span class="material-symbols-rounded">bolt</span>
                    </div>
                    <div>
                        <h3 class="section-title">Quick Actions</h3>
                        <p class="section-subtitle">Manage your income tracking efficiently</p>
                    </div>
                </div>
            </div>
            
            <div class="quick-actions-grid">
                <div class="quick-action-card" onclick="addManualIncome()">
                    <div class="quick-action-icon" style="background: var(--gradient-success);">
                        <span class="material-symbols-rounded">add_circle</span>
                    </div>
                    <h5 class="quick-action-title">Add Income</h5>
                    <p class="quick-action-description">Manually add earnings not auto-tracked</p>
                </div>
                
                <div class="quick-action-card" onclick="window.location.href='expense-analyzer.html'">
                    <div class="quick-action-icon" style="background: var(--gradient-danger);">
                        <span class="material-symbols-rounded">money_off</span>
                    </div>
                    <h5 class="quick-action-title">Track Expenses</h5>
                    <p class="quick-action-description">Log fuel, maintenance & other costs</p>
                </div>
                
                <div class="quick-action-card" onclick="exportIncomeReport()">
                    <div class="quick-action-icon" style="background: var(--gradient-primary);">
                        <span class="material-symbols-rounded">download</span>
                    </div>
                    <h5 class="quick-action-title">Export Report</h5>
                    <p class="quick-action-description">Download income data as PDF/Excel</p>
                </div>
                
                <div class="quick-action-card" onclick="window.location.href='goals.html'">
                    <div class="quick-action-icon" style="background: var(--gradient-secondary);">
                        <span class="material-symbols-rounded">flag</span>
                    </div>
                    <h5 class="quick-action-title">Set Goals</h5>
                    <p class="quick-action-description">Create income targets & milestones</p>
                </div>
            </div>
        </section>
        
    </div>
    <!-- End of main-container -->
    <script>
        /* ═══════════════════════════════════════════════════════════════════════
           FINSAVVY AI - INCOME TRACKER JAVASCRIPT ENGINE
           Complete AI-Powered Income Management System
           All Features Working with Real-Time Intelligence
           ═══════════════════════════════════════════════════════════════════════ */
        
        console.log('%c💰 FinSavvy AI - Income Tracker', 'font-size: 20px; font-weight: bold; color: #34A853;');
        console.log('%c📊 Loading Income Prediction Engine...', 'font-size: 14px; color: #4ECDC4;');
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // GLOBAL STATE MANAGEMENT
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        const IncomeTrackerState = {
            user: {
                name: 'Ravi Kumar',
                initials: 'RK',
                profession: 'Swiggy Delivery Partner',
                city: 'Delhi',
                joinedDate: '2024-03-15'
            },
            income: {
                today: 920,
                thisMonth: 20140,
                monthlyTarget: 28640,
                dailyAverage: 950,
                totalDeliveries: 276
            },
            forecast: {
                next7Days: 6800,
                confidence: 89,
                weatherImpact: -20,
                festivalBoost: 25
            },
            platforms: {
                swiggy: {
                    thisMonth: 12800,
                    deliveries: 156,
                    rating: 4.8,
                    change: 18
                },
                zomato: {
                    thisMonth: 5840,
                    deliveries: 98,
                    rating: 4.7,
                    change: 12
                },
                other: {
                    thisMonth: 1500,
                    deliveries: 22,
                    rating: 4.9,
                    change: 8
                }
            },
            expenses: {
                commission: 4028,
                fuel: 2520,
                maintenance: 1200,
                mobile: 399,
                total: 8147
            },
            transactions: [],
            notifications: []
        };
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // AI INCOME PREDICTION ENGINE
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        class AIIncomePredictionEngine {
            constructor() {
                this.historicalData = this.loadHistoricalData();
                this.weatherAPI = 'https://api.openweathermap.org/data/2.5/forecast'; // Mock
                this.confidence = 0.89;
            }
            
            loadHistoricalData() {
                // Last 30 days income data
                const data = [];
                const baseIncome = 950;
                
                for (let i = 0; i < 30; i++) {
                    const dayOfWeek = (new Date().getDay() - i + 7) % 7;
                    const weekendBoost = (dayOfWeek === 5 || dayOfWeek === 6) ? 200 : 0;
                    const randomVariance = (Math.random() - 0.5) * 150;
                    
                    data.push({
                        date: this.getDaysAgo(i),
                        income: Math.round(baseIncome + weekendBoost + randomVariance),
                        deliveries: Math.round(8 + (Math.random() * 4)),
                        weather: this.getRandomWeather()
                    });
                }
                
                return data.reverse();
            }
            
            getDaysAgo(days) {
                const date = new Date();
                date.setDate(date.getDate() - days);
                return date.toISOString().split('T')[0];
            }
            
            getRandomWeather() {
                const conditions = ['Clear', 'Cloudy', 'Rain', 'Storm'];
                return conditions[Math.floor(Math.random() * conditions.length)];
            }
            
            predictNext7Days() {
                const predictions = [];
                const today = new Date();
                
                const forecasts = [
                    { day: 'Today', amount: 920, change: -20, weather: '🌧️', reason: 'Rain expected, fewer orders predicted' },
                    { day: 'Tomorrow', amount: 1100, change: 15, weather: '☀️', reason: 'Friday peak orders, good weather' },
                    { day: 'Day After', amount: 1050, change: 10, weather: '☀️', reason: 'Weekend surge, high demand' },
                    { day: 'Day 4', amount: 980, change: 3, weather: '⛅', reason: 'Steady workday, normal volume' },
                    { day: 'Day 5', amount: 1150, change: 21, weather: '🌤️', reason: 'Weekend boost, party orders' },
                    { day: 'Day 6', amount: 1080, change: 14, weather: '☀️', reason: 'Sunday lunch/dinner surge' },
                    { day: 'Day 7', amount: 1200, change: 26, weather: '🎉', reason: 'Festival season starts!' }
                ];
                
                forecasts.forEach((forecast, index) => {
                    const date = new Date(today);
                    date.setDate(date.getDate() + index);
                    
                    predictions.push({
                        ...forecast,
                        date: date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),
                        confidence: Math.max(0.92 - (index * 0.02), 0.78)
                    });
                });
                
                return predictions;
            }
            
            analyzeWeatherImpact(weatherCondition) {
                const impactMap = {
                    'Clear': 1.1,
                    'Cloudy': 1.0,
                    'Rain': 0.8,
                    'Storm': 0.6
                };
                
                return impactMap[weatherCondition] || 1.0;
            }
            
            calculateTrend() {
                const recent7Days = this.historicalData.slice(-7);
                const previous7Days = this.historicalData.slice(-14, -7);
                
                const recentAvg = recent7Days.reduce((sum, day) => sum + day.income, 0) / 7;
                const previousAvg = previous7Days.reduce((sum, day) => sum + day.income, 0) / 7;
                
                const trendPercentage = ((recentAvg - previousAvg) / previousAvg) * 100;
                
                return {
                    direction: trendPercentage > 0 ? 'up' : 'down',
                    percentage: Math.abs(trendPercentage).toFixed(1),
                    message: trendPercentage > 0 ? 
                        `Income trending up by ${Math.abs(trendPercentage).toFixed(1)}%` :
                        `Income trending down by ${Math.abs(trendPercentage).toFixed(1)}%`
                };
            }
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // AI COACH & NOTIFICATIONS SYSTEM
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        class AICoachSystem {
            constructor() {
                this.coachingMessages = this.loadCoachingTemplates();
                this.notificationQueue = [];
            }
            
            loadCoachingTemplates() {
                return {
                    motivation: [
                        "💪 {name}, you're crushing it! {achievement}. Keep this momentum!",
                        "🌟 Amazing progress, {name}! You're {percentage}% ahead of last month.",
                        "🔥 {name}, your dedication is paying off! {insight}"
                    ],
                    warning: [
                        "⚠️ Hey {name}, income is {percentage}% below average today. {suggestion}",
                        "🌧️ Weather alert! Rain expected. Consider {alternative}",
                        "📉 Income dip detected. {action} to get back on track."
                    ],
                    tips: [
                        "💡 Pro tip: Working 7-9 PM on weekends can boost income by ₹1,200/week",
                        "📊 Data shows Friday 12-2 PM is your most profitable slot",
                        "🎯 You're ₹{amount} away from monthly target. {days} days left!"
                    ],
                    celebration: [
                        "🎉 Milestone achieved! You've earned ₹{amount} this month!",
                        "🏆 New record! {achievement}. You're in top 10% of riders!",
                        "⭐ Perfect week! Maintained daily average of ₹{amount}!"
                    ]
                };
            }
            
            generateMotivation() {
                const { name } = IncomeTrackerState.user;
                const { thisMonth, monthlyTarget } = IncomeTrackerState.income;
                const percentage = Math.round((thisMonth / monthlyTarget) * 100);
                
                let message = "Hey {name}! 💪";
                
                if (percentage >= 100) {
                    message = `🎉 Incredible, ${name}! You've hit your monthly target already! You're unstoppable!`;
                } else if (percentage >= 70) {
                    message = `🔥 Great work, ${name}! You're ${percentage}% there. Just ₹${monthlyTarget - thisMonth} more to go!`;
                } else if (percentage >= 50) {
                    message = `💪 Keep pushing, ${name}! You're halfway there. Every delivery counts!`;
                } else {
                    message = `🌟 ${name}, slow start but plenty of time! Focus on peak hours to catch up.`;
                }
                
                return message;
            }
            
            generateWeatherAlert(weatherCondition) {
                const alerts = {
                    'Rain': '🌧️ Rain expected today. Orders might be 20% lower. Consider working 7-9 PM when demand peaks despite weather.',
                    'Storm': '⛈️ Storm warning! Stay safe. Income might drop 40%. Tomorrow looks much better!',
                    'Clear': '☀️ Perfect weather! Great day for deliveries. Aim for 10+ orders today!',
                    'Cloudy': '⛅ Decent weather. Normal income expected. Focus on peak hours!'
                };
                
                return alerts[weatherCondition] || alerts['Clear'];
            }
            
            generatePeakHourAlert() {
                const now = new Date();
                const hour = now.getHours();
                
                if (hour >= 11 && hour <= 13) {
                    return '🔥 Peak lunch hour! Get online now for maximum orders!';
                } else if (hour >= 18 && hour <= 20) {
                    return '🌙 Peak dinner rush! This is your highest earning window!';
                } else if (hour >= 6 && hour <= 9) {
                    return '🌅 Morning breakfast orders starting. Good time to go online!';
                } else {
                    return '💡 Next peak hour: ' + (hour < 11 ? '12-2 PM' : '7-9 PM');
                }
            }
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // TRUE TAKE-HOME CALCULATOR
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        class TrueIncomeCalculator {
            calculate(grossIncome) {
                const commission = grossIncome * 0.20; // 20% platform fee
                const fuel = this.calculateFuelCost(grossIncome);
                const maintenance = 1200; // Fixed monthly
                const mobile = 399; // Fixed monthly
                
                const totalExpenses = commission + fuel + maintenance + mobile;
                const netIncome = grossIncome - totalExpenses;
                
                return {
                    gross: grossIncome,
                    expenses: {
                        commission: Math.round(commission),
                        fuel: Math.round(fuel),
                        maintenance: maintenance,
                        mobile: mobile,
                        total: Math.round(totalExpenses)
                    },
                    net: Math.round(netIncome),
                    profitMargin: Math.round((netIncome / grossIncome) * 100)
                };
            }
            
            calculateFuelCost(income) {
                // Assume ₹6/km fuel cost, avg 2 km per delivery, ₹80 per delivery
                const avgDeliveries = income / 80;
                const totalKm = avgDeliveries * 2;
                return totalKm * 6;
            }
            
            optimizeFuelEfficiency(currentKm, income) {
                const currentFuelCost = (currentKm * 6);
                const optimizedKm = currentKm * 0.85; // 15% improvement
                const optimizedFuelCost = optimizedKm * 6;
                const savings = currentFuelCost - optimizedFuelCost;
                
                return {
                    currentKm: currentKm,
                    optimizedKm: Math.round(optimizedKm),
                    monthlySavings: Math.round(savings),
                    tips: [
                        'Plan efficient routes using Google Maps',
                        'Batch orders in same area',
                        'Maintain optimal tire pressure (32 PSI)',
                        'Avoid idling - turn off engine when waiting'
                    ]
                };
            }
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // INITIALIZE ALL ENGINES
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        const incomePredictionEngine = new AIIncomePredictionEngine();
        const aiCoach = new AICoachSystem();
        const incomeCalculator = new TrueIncomeCalculator();
        
        console.log('✅ Income Tracker Engines Loaded:');
        console.log('   🤖 AI Income Prediction Engine');
        console.log('   💬 AI Coach System');
        console.log('   💰 True Take-Home Calculator');
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // UI INTERACTION FUNCTIONS
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function openAICoach() {
            const message = aiCoach.generateMotivation();
            const peakAlert = aiCoach.generatePeakHourAlert();
            
            alert(`🤖 AI Coach Says:\n\n${message}\n\n${peakAlert}`);
        }
        
        function showIncomeForecast() {
            const predictions = incomePredictionEngine.predictNext7Days();
            let message = '🔮 7-Day Income Forecast:\n\n';
            
            predictions.forEach((pred, index) => {
                message += `${pred.day} (${pred.date}): ₹${pred.amount} ${pred.weather}\n`;
                message += `  ${pred.reason}\n`;
                message += `  Confidence: ${Math.round(pred.confidence * 100)}%\n\n`;
            });
            
            message += `📊 Total next 7 days: ₹${predictions.reduce((sum, p) => sum + p.amount, 0)}`;
            
            alert(message);
        }
        
        function changeChartPeriod(period) {
            // Remove active class from all buttons
            document.querySelectorAll('.chart-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Update chart (will be implemented with Chart.js)
            console.log(`Chart period changed to: ${period}`);
            showToast(`Chart updated to ${period} view`, 'info');
        }
        
        function viewAllTransactions() {
            window.location.href = 'transactions.html';
        }
        
        function addManualIncome() {
            const amount = prompt('Enter income amount (₹):');
            const platform = prompt('Platform (Swiggy/Zomato/Other):');
            
            if (amount && platform && !isNaN(amount)) {
                IncomeTrackerState.income.thisMonth += parseInt(amount);
                showToast(`✅ Added ₹${amount} from ${platform}!`, 'success');
                
                // Update display
                updateIncomeDisplay();
            }
        }
        
        function exportIncomeReport() {
            showToast('📥 Generating income report...', 'info');
            
            setTimeout(() => {
                const reportData = {
                    ...IncomeTrackerState,
                    generatedAt: new Date().toISOString(),
                    calculations: incomeCalculator.calculate(IncomeTrackerState.income.thisMonth)
                };
                
                const blob = new Blob([JSON.stringify(reportData, null, 2)], { 
                    type: 'application/json' 
                });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `income-report-${Date.now()}.json`;
                a.click();
                
                showToast('✅ Report exported successfully!', 'success');
            }, 1000);
        }
        
        function addToEmergencyFund() {
            const amount = prompt('Add amount to Emergency Fund (₹):');
            
            if (amount && !isNaN(amount) && amount > 0) {
                showToast(`✅ Added ₹${amount} to Emergency Fund!`, 'success');
            }
        }
        
        function updateIncomeDisplay() {
            // Update dynamic elements on page
            const monthlyAmount = document.querySelector('.meter-amount');
            if (monthlyAmount) {
                monthlyAmount.textContent = `₹${IncomeTrackerState.income.thisMonth.toLocaleString()}`;
            }
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // TOAST NOTIFICATION SYSTEM
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function showToast(message, type = 'info') {
            const colors = {
                success: '#34A853',
                error: '#EA4335',
                warning: '#FBBC04',
                info: '#4285F4'
            };
            
            const icons = {
                success: 'check_circle',
                error: 'error',
                warning: 'warning',
                info: 'info'
            };
            
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 24px;
                right: 24px;
                background: ${colors[type]};
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
                display: flex;
                align-items: center;
                gap: 12px;
                z-index: 10000;
                animation: slideInRight 0.3s ease;
                max-width: 400px;
            `;
            
            toast.innerHTML = `
                <span class="material-symbols-rounded" style="font-size: 24px;">${icons[type]}</span>
                <span style="font-size: 14px; font-weight: 600;">${message}</span>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
        
        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(400px);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOutRight {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(400px);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // CHART.JS CONFIGURATION & INITIALIZATION
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        console.log('%c📊 Initializing Chart.js Visualizations...', 'font-size: 14px; color: #FBBC04;');
        
        // Chart.js Global Configuration
        Chart.defaults.color = '#a0a0a0';
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.plugins.legend.display = false;
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // INCOME HISTORY CHART (Line Chart with Gradient)
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function createIncomeHistoryChart() {
            const ctx = document.getElementById('incomeHistoryChart');
            if (!ctx) return;
            
            const historicalData = incomePredictionEngine.historicalData.slice(-30);
            
            const labels = historicalData.map(d => {
                const date = new Date(d.date);
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            });
            
            const data = historicalData.map(d => d.income);
            
            // Create gradient
            const gradient = ctx.getContext('2d').createLinearGradient(0, 0, 0, 350);
            gradient.addColorStop(0, 'rgba(52, 168, 83, 0.4)');
            gradient.addColorStop(1, 'rgba(52, 168, 83, 0.0)');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Daily Income',
                        data: data,
                        borderColor: '#34A853',
                        backgroundColor: gradient,
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#34A853',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        pointHoverBackgroundColor: '#34A853',
                        pointHoverBorderColor: '#ffffff',
                        pointHoverBorderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false
                    },
                    plugins: {
                        tooltip: {
                            backgroundColor: 'rgba(26, 26, 26, 0.95)',
                            titleColor: '#ffffff',
                            bodyColor: '#e0e0e0',
                            borderColor: 'rgba(255, 255, 255, 0.1)',
                            borderWidth: 1,
                            padding: 12,
                            displayColors: false,
                            callbacks: {
                                title: function(context) {
                                    return context[0].label;
                                },
                                label: function(context) {
                                    return '₹' + context.parsed.y.toLocaleString();
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45,
                                font: {
                                    size: 11
                                }
                            }
                        },
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.06)',
                                drawBorder: false
                            },
                            ticks: {
                                callback: function(value) {
                                    return '₹' + value.toLocaleString();
                                },
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuart'
                    }
                }
            });
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // TAKE-HOME BREAKDOWN CHART (Doughnut Chart)
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function createTakeHomeChart() {
            const ctx = document.getElementById('takeHomeChart');
            if (!ctx) return;
            
            const calculation = incomeCalculator.calculate(IncomeTrackerState.income.thisMonth);
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Net Take-Home', 'Commission', 'Fuel', 'Maintenance', 'Mobile'],
                    datasets: [{
                        data: [
                            calculation.net,
                            calculation.expenses.commission,
                            calculation.expenses.fuel,
                            calculation.expenses.maintenance,
                            calculation.expenses.mobile
                        ],
                        backgroundColor: [
                            '#34A853',
                            '#EA4335',
                            '#FBBC04',
                            '#4285F4',
                            '#A855F7'
                        ],
                        borderWidth: 0,
                        hoverBorderWidth: 4,
                        hoverBorderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            display: true,
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 13,
                                    weight: '600'
                                },
                                color: '#e0e0e0',
                                usePointStyle: true,
                                pointStyle: 'circle'
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(26, 26, 26, 0.95)',
                            titleColor: '#ffffff',
                            bodyColor: '#e0e0e0',
                            borderColor: 'rgba(255, 255, 255, 0.1)',
                            borderWidth: 1,
                            padding: 12,
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ₹${value.toLocaleString()} (${percentage}%)`;
                                }
                            }
                        }
                    },
                    animation: {
                        animateRotate: true,
                        animateScale: true,
                        duration: 2000,
                        easing: 'easeInOutQuart'
                    }
                },
                plugins: [{
                    id: 'centerText',
                    beforeDraw: function(chart) {
                        const ctx = chart.ctx;
                        const centerX = (chart.chartArea.left + chart.chartArea.right) / 2;
                        const centerY = (chart.chartArea.top + chart.chartArea.bottom) / 2;
                        
                        ctx.save();
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        
                        // Main amount
                        ctx.font = 'bold 36px Space Grotesk';
                        ctx.fillStyle = '#34A853';
                        ctx.fillText('₹' + calculation.net.toLocaleString(), centerX, centerY - 10);
                        
                        // Label
                        ctx.font = '500 12px Inter';
                        ctx.fillStyle = '#707070';
                        ctx.fillText('NET TAKE-HOME', centerX, centerY + 20);
                        
                        ctx.restore();
                    }
                }]
            });
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // ANIMATED COUNTER (Number Animation)
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function animateValue(element, start, end, duration) {
            if (!element) return;
            
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const currentValue = Math.floor(progress * (end - start) + start);
                
                element.textContent = '₹' + currentValue.toLocaleString();
                
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }
        
        function animateAllCounters() {
            // Animate income meter
            const meterAmount = document.querySelector('.meter-amount');
            if (meterAmount) {
                animateValue(meterAmount, 0, IncomeTrackerState.income.thisMonth, 2000);
            }
            
            // Animate stat cards
            document.querySelectorAll('.stat-value').forEach(element => {
                const targetValue = parseInt(element.textContent.replace(/[₹,]/g, ''));
                if (!isNaN(targetValue)) {
                    animateValue(element, 0, targetValue, 1500);
                }
            });
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // PROGRESS BAR ANIMATIONS
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function animateProgressBars() {
            // Animate circular meter
            const meterProgress = document.querySelector('.meter-progress');
            if (meterProgress) {
                setTimeout(() => {
                    const percentage = (IncomeTrackerState.income.thisMonth / IncomeTrackerState.income.monthlyTarget);
                    const circumference = 2 * Math.PI * 115; // radius = 115
                    const offset = circumference - (percentage * circumference);
                    meterProgress.style.strokeDashoffset = offset;
                }, 100);
            }
            
            // Animate confidence bars in forecast
            document.querySelectorAll('.confidence-fill').forEach((bar, index) => {
                setTimeout(() => {
                    bar.style.transition = 'width 1.5s cubic-bezier(0.4, 0, 0.2, 1)';
                    const width = bar.style.width;
                    bar.style.width = '0';
                    setTimeout(() => {
                        bar.style.width = width;
                    }, 50);
                }, index * 100);
            });
            
            // Animate risk meter
            const riskFill = document.querySelector('.risk-meter-fill');
            if (riskFill) {
                setTimeout(() => {
                    riskFill.style.width = '42%';
                }, 200);
            }
            
            // Animate fund progress
            const fundFill = document.querySelector('.fund-progress-fill');
            if (fundFill) {
                setTimeout(() => {
                    fundFill.style.width = '20%';
                }, 300);
            }
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // SCROLL ANIMATIONS (Intersection Observer)
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function initScrollAnimations() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, {
                threshold: 0.1,
                rootMargin: '0px 0px -100px 0px'
            });
            
            // Observe all section cards
            document.querySelectorAll('.forecast-day-card, .platform-card, .quick-action-card').forEach(card => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(30px)';
                card.style.transition = 'all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
                observer.observe(card);
            });
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // REAL-TIME UPDATES (Simulated)
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function startRealTimeUpdates() {
            // Simulate real-time income updates every 30 seconds
            setInterval(() => {
                const randomIncrease = Math.floor(Math.random() * 50) + 80; // ₹80-130
                IncomeTrackerState.income.today += randomIncrease;
                
                // Update display
                const todayAmount = document.querySelector('.pulse-title .highlight');
                if (todayAmount) {
                    todayAmount.textContent = '₹' + IncomeTrackerState.income.today;
                }
                
                // Show notification
                if (Math.random() > 0.7) {
                    showToast(`🎉 New delivery completed! +₹${randomIncrease}`, 'success');
                }
            }, 30000);
            
            // Update time-sensitive alerts
            setInterval(() => {
                const peakAlert = aiCoach.generatePeakHourAlert();
                console.log('Peak Hour Alert:', peakAlert);
            }, 60000);
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // HEATMAP INTERACTION
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function initHeatmapInteractions() {
            document.querySelectorAll('.heatmap-cell').forEach(cell => {
                cell.addEventListener('click', function() {
                    const level = this.className.match(/level-(\d)/)[1];
                    const intensity = ['Very Low', 'Low', 'Moderate', 'Good', 'High', 'Peak'][parseInt(level)];
                    
                    showToast(`📊 Income Intensity: ${intensity}`, 'info');
                });
            });
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // INITIALIZE ON PAGE LOAD
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        window.addEventListener('DOMContentLoaded', function() {
            console.log('%c🚀 Income Tracker Initializing...', 'font-size: 16px; font-weight: bold; color: #FF6B6B;');
            
            // Initialize all visualizations
            setTimeout(() => {
                createIncomeHistoryChart();
                console.log('✅ Income History Chart Created');
            }, 100);
            
            setTimeout(() => {
                createTakeHomeChart();
                console.log('✅ Take-Home Breakdown Chart Created');
            }, 200);
            
            setTimeout(() => {
                animateAllCounters();
                console.log('✅ Animated Counters Started');
            }, 300);
            
            setTimeout(() => {
                animateProgressBars();
                console.log('✅ Progress Bars Animated');
            }, 400);
            
            setTimeout(() => {
                initScrollAnimations();
                console.log('✅ Scroll Animations Initialized');
            }, 500);
            
            setTimeout(() => {
                initHeatmapInteractions();
                console.log('✅ Heatmap Interactions Ready');
            }, 600);
            
            setTimeout(() => {
                startRealTimeUpdates();
                console.log('✅ Real-Time Updates Started');
            }, 1000);
            
            // Show welcome message
            setTimeout(() => {
                const motivationalMessage = aiCoach.generateMotivation();
                showToast(motivationalMessage, 'success');
                console.log('%c✨ All Systems Ready!', 'font-size: 18px; font-weight: bold; color: #34A853;');
            }, 1500);
        });
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // KEYBOARD SHORTCUTS
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + I: Add Income
            if ((e.ctrlKey || e.metaKey) && e.key === 'i') {
                e.preventDefault();
                addManualIncome();
            }
            
            // Ctrl/Cmd + F: Show Forecast
            if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                e.preventDefault();
                showIncomeForecast();
            }
            
            // Ctrl/Cmd + C: Open AI Coach
            if ((e.ctrlKey || e.metaKey) && e.key === 'c') {
                e.preventDefault();
                openAICoach();
            }
            
            // Ctrl/Cmd + E: Export Report
            if ((e.ctrlKey || e.metaKey) && e.key === 'e') {
                e.preventDefault();
                exportIncomeReport();
            }
        });
        
        console.log('%c⌨️  Keyboard Shortcuts:', 'font-weight: bold; color: #4285F4;');
        console.log('   Ctrl/Cmd + I: Add Income');
        console.log('   Ctrl/Cmd + F: Forecast');
        console.log('   Ctrl/Cmd + C: AI Coach');
        console.log('   Ctrl/Cmd + E: Export');
    </script>
</body>
</html>

